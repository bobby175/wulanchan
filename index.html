<!DOCTYPE html>
<html lang="id">
<head>
    <meta property="og:title" content="Tolong di buka yaaa">
    <meta property="og:description" content="Ada sesuatu yang spesial buat kamu âœ¨">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.wulanchan.biz.id">
    <meta property="og:image" content="https://raw.githubusercontent.com/bobby175/my-porto/main/13.png">
    <meta property="og:image:width" content="400">
    <meta property="og:image:height" content="400">
    <meta property="og:image:type" content="image/jpeg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Tolong di buka yaaa ">
    <meta name="twitter:description" content="Ada sesuatu yang spesial buat kamu âœ¨">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/bobby175/my-porto/main/13.png">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otanjoubi Omedetou Wulan Ayu D.W.</title>
    
    <link rel="stylesheet" href="style.css?v=3">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

    <style>
        #msgModal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #msgModal.show { display: flex; opacity: 1; }
        .modal-content {
            background: linear-gradient(135deg, #1b1530 0%, #2a1f45 100%);
            padding: 1.5rem;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            border: 2px solid #ff75e6;
            box-shadow: 0 0 30px rgba(255, 117, 230, 0.4);
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }
        #msgModal.show .modal-content { transform: scale(1); }
        .modal-content h3 {
            color: #ffd6f4; margin-top: 0; margin-bottom: 1rem;
            font-size: 1.4rem; text-shadow: 0 0 8px rgba(255, 150, 255, 0.6);
        }
        #userMessageInput {
            width: 100%; height: 120px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px; padding: 12px;
            color: #fff; font-family: 'Poppins', sans-serif;
            font-size: 0.95rem; resize: none; outline: none; margin-bottom: 1rem;
        }
        #userMessageInput:focus { border-color: #ff75e6; background: rgba(255, 255, 255, 0.15); }
        .modal-actions { display: flex; justify-content: center; gap: 1rem; }
        .modal-btn {
            padding: 0.6rem 1.2rem; border-radius: 99px; border: none;
            font-weight: 600; cursor: pointer; transition: all 0.2s; font-family: 'Poppins', sans-serif;
        }
        #sendMsgBtn { background: #ff4bd1; color: white; box-shadow: 0 0 10px rgba(255, 75, 209, 0.4); }
        #sendMsgBtn:hover { background: #ff29f5; transform: translateY(-2px); }
        #cancelMsgBtn { background: transparent; border: 1px solid rgba(255, 255, 255, 0.3); color: #ddd; }
        
        #toast {
            visibility: hidden; min-width: 250px; background: rgba(72, 201, 113, 0.95);
            color: #fff; text-align: center; border-radius: 50px; padding: 16px;
            position: fixed; z-index: 10001; left: 50%; bottom: 30px;
            transform: translateX(-50%); font-size: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); border: 1px solid #75ffa0;
        }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }

        #countdownOverlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 20000;
            background: radial-gradient(circle at center, rgba(42, 31, 69, 0.85) 0%, rgba(0, 0, 0, 0.98) 100%);
            backdrop-filter: blur(12px);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.4s ease;
            pointer-events: none;
        }
        #countdownOverlay.show { opacity: 1; pointer-events: auto; }
        
        .countdown-cute {
            font-size: 1.8rem; color: #ffd6f4; margin-bottom: 2rem;
            font-weight: 600; letter-spacing: 2px; text-transform: uppercase;
            animation: textGlowPulse 1.5s infinite alternate;
            text-align: center;
        }
        
        #countdownNumber {
            font-family: 'Poppins', sans-serif;
            font-size: 12rem; line-height: 1; font-weight: 900;
            background: linear-gradient(to bottom right, #fff 20%, #ff75e6 50%, #a18cd1 80%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 117, 230, 0.8), 0 0 60px rgba(161, 140, 209, 0.6);
            opacity: 0; transform: scale(0.5);
        }

        #countdownNumber.popAnim {
            animation: countdownPop 0.9s cubic-bezier(0.25, 1.5, 0.5, 1) forwards;
        }

        @keyframes countdownPop {
            0% { opacity: 0; transform: scale(0.4); filter: blur(15px); }
            50% { opacity: 1; transform: scale(1.1); filter: blur(0); }
            100% { opacity: 0; transform: scale(1.6); filter: blur(5px); }
        }
        @keyframes textGlowPulse {
            from { text-shadow: 0 0 10px rgba(255, 214, 244, 0.5); }
            to { text-shadow: 0 0 25px rgba(255, 214, 244, 1), 0 0 10px #fff; }
        }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
    </style>
</head>

<body>
    
    <audio id="bgm" src="https://bit.ly/4pyMi6i" loop></audio>

    <div id="startScreen" aria-modal="true" role="dialog">
        <h2>ğŸ€ <span class="dancing-text">Ada</span> Sesuatu <span class="dancing-text">Untuk</span> <span class="dancing-text">Wulan</span> ğŸ€</h2>
        
        <div id="birthdayCountdown">
            <div class="countdown-title">â³ Hitung Mundur Hari Spesial âœ¨</div>
            <div class="countdown-display">
                <div class="countdown-unit"><div id="countdownDays" class="countdown-number">00</div><div class="countdown-label">Hari</div></div>
                <div class="countdown-unit"><div id="countdownHours" class="countdown-number">00</div><div class="countdown-label">Jam</div></div>
                <div class="countdown-unit"><div id="countdownMinutes" class="countdown-number">00</div><div class="countdown-label">Menit</div></div>
                <div class="countdown-unit"><div id="countdownSeconds" class="countdown-number">00</div><div class="countdown-label">Detik</div></div>
            </div>
            <div id="countdownMessage">Tombol akan aktif saat hari ulang tahun tiba! âœ¨</div>
        </div>
        <button id="openBtn" disabled>ğŸ’Œ Buka</button>
    </div>

    <div id="messageBox" aria-hidden="true">
        <div id="messageContent" role="document" aria-labelledby="title">
            <div class="profile-container">
                <div class="profile-photo-wrapper" id="profilePhotoWrapper">
                    <img src="someone.jpg" alt="Foto Si Cantik" class="profile-photo no-download" loading="eager">
                    <div class="photo-decoration top">ğŸ€</div>
                    <div class="photo-decoration bottom">âœ¨</div>
                    <div class="photo-protection"></div>
                </div>
            </div>
            <div class="name-under-photo">Wulan Ayu D.W.</div>
            <div id="timeWrapper">
                <div class="date-age-container">
                    <p id="birthDate" class="birth-date" aria-live="polite"></p>
                    <p id="ageInfo" class="birth-age" aria-live="polite"></p>
                </div>
                <p id="currentDateTime" class="current-date" aria-live="polite"></p>
            </div>
            <h1 id="title" class="neonTitle" role="heading" aria-live="polite">ğŸ‰ Otanjoubi Omedetou ğŸ‰</h1>
            <div class="gift-gif-container">
                <img src="gifjjk.gif" alt="JJK Gift" class="gift-gif no-download" loading="eager">
            </div>
            <div id="typedText" aria-live="polite"></div>
            <div id="heartWrap"><span class="bigHeart" aria-hidden="true">â¤ï¸</span></div>
            <div class="btnRow" style="margin-top:12px;">
                <button id="giftBtn" class="btn"><span class="gift-icon">ğŸ</span> Ada Hadiah Disini!</button>
            </div>
        </div>
    </div>

    <div id="endScreen" role="dialog" aria-modal="true">
        <div id="endInner">
            <h2>Terima kasih telah berkenan membuka ğŸ€</h2>
            <p class="typing-line"></p><p class="typing-line"></p><p class="typing-line"></p><p class="typing-line"></p><p class="typing-line"></p>
            <p class="typing-line"></p><p class="typing-line"></p><p class="typing-line"></p><p class="typing-line"></p><p class="typing-line"></p>
            <p class="hint" style="font-style:italic; opacity:0.6;">Hadiah ini wajib di Ambil, kalau sampe ngga di ambil aku bakal kecewa berat. Disarankan ngambilnya buka lewat chrome di hp</p>
            
            <div class="btnRow" style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 1rem; justify-content: center; align-items: center; margin-top: 1.5rem; width: 100%;">
                <button id="replayBtn" class="btn" style="min-width: 130px;">ğŸ”„ Mainkan Lagi</button>
                <button id="openMsgBtn" class="btn" style="min-width: 130px; background: linear-gradient(45deg, #a18cd1 0%, #fbc2eb 100%); box-shadow: 0 0 12px rgba(161, 140, 209, 0.5);">ğŸ“© Kirim Pesan</button>
                <button id="giftEndBtn" class="btn" style="min-width: 130px;"><span class="gift-icon">ğŸ</span> Ambil Gift</button>
            </div>
        </div>
        <div id="signature">A.M.</div>
    </div>

    <div id="msgModal">
        <div class="modal-content">
            <h3>ğŸ’Œ Kirim Pesan Rahasia</h3>
            <textarea id="userMessageInput" placeholder="Tulis pesan Anonymous di sini..."></textarea>
            <div class="modal-actions">
                <button id="cancelMsgBtn" class="modal-btn">Batal</button>
                <button id="sendMsgBtn" class="modal-btn">Kirim âœ¨</button>
            </div>
        </div>
    </div>
    <div id="toast">Pesan terkirim! Terima kasih ğŸ’–</div>

    <canvas id="canvas"></canvas>
    <div id="whisperContainer"></div>
    <div id="cuteLayer" class="cute-layer"></div>
    
    <div id="countdownOverlay" style="display:none">
        <div class="countdown-cute" id="countdownCute">âœ¨ Are You Ready? âœ¨</div>
        <div id="countdownNumber">3</div>
    </div>
    
    <canvas id="rocketCanvas"></canvas>
    <div id="giftChoiceModal" class="modal-overlay">
        <div class="modal-content choice-content">
            <h3>ğŸ Cara Ambil Hadiah</h3>
            <p>Mau ambil hadiahnya gimana nih?</p>
            <div class="choice-actions">
                <button id="btnDirectClaim" class="modal-btn choice-btn direct">
                    ğŸš€ Ambil Langsung
                    <span class="btn-subtext">(Tanpa Ribet)</span>
                </button>
                <button id="btnPlayGame" class="modal-btn choice-btn game">
                    ğŸ® Main Game Dulu
                    <span class="btn-subtext">(Lebih Seru!)</span>
                </button>
            </div>
            <button id="btnCloseChoice" class="close-text-btn">Batal</button>
        </div>
    </div>

    <div id="arcadeContainer" style="display: none;">
        <button id="btnExitGame" class="exit-game-btn">âŒ Keluar</button>
        
        <div id="s-intro" class="screen-game">
            <h1 class="game-title">Happy<br>Birthday!</h1>
            <div style="font-size: 5rem; margin: 20px; animation: float 3s infinite;">ğŸ¦„</div>
            <p class="game-desc">Kumpulkan <strong>10 Poin</strong>!<br>Pukul Kue ğŸ‚, Jangan Pukul Pup ğŸ’©!</p>
            <button class="btn-cute" onclick="window.arcadeGame.startGame()">MAINKAN! â–¶</button>
        </div>

        <div id="s-game" class="screen-game hidden">
            <div class="score-bubble">Skor: <span id="gameScore">0</span> / 10</div>
            <div class="game-grid" id="gameGrid"></div>
            <p style="font-size: 0.9rem; margin-top: 10px; color:white;">ğŸ’© = Skor Berkurang!, ğŸ¦„ = Skor +3</p>
        </div>

        <div id="s-choose" class="screen-game hidden" style="background: linear-gradient(180deg, #ff9ff3, #feca57);">
            <h1 class="game-title">Hore Menang!</h1>
            <p class="game-desc">Pilih kotak keberuntunganmu:</p>
            <div class="box-container">
                <div class="mystery-box" onclick="window.arcadeGame.openPrize(0)">ğŸ</div>
                <div class="mystery-box" onclick="window.arcadeGame.openPrize(1)">ğŸ</div>
                <div class="mystery-box" onclick="window.arcadeGame.openPrize(2)">ğŸ</div>
                <div class="mystery-box" onclick="window.arcadeGame.openPrize(3)">ğŸ</div>
            </div>
        </div>

        <div id="s-result" class="screen-game hidden" style="background: #74b9ff;">
            <div id="capture-area" class="cute-coupon">
                <div class="coupon-deco-top">âœ¨ğŸ€âœ¨</div>
                <h2 class="coupon-title">SELAMAT! HORE!</h2>
                <p class="coupon-subtitle">Yey! Kamu berhak dapetin:</p>
                <div class="prize-container-decorated">
                    <span class="deco-icon bounce">ğŸ¦„</span>
                    <div id="prize-text" class="prize-text-styled">...</div>
                    <span class="deco-icon bounce delay">ğŸ’–</span>
                </div>
                <div class="coupon-footer">
                    <small>ğŸ« Tiket Kado Sah & Valid ğŸ«</small>
                    <div class="coupon-deco-bottom">âœ¨ğŸŒ¸âœ¨</div>
                </div>
            </div>
            <button id="btnGameWa" class="btn-cute btn-wa" onclick="window.arcadeGame.sendWA()">ğŸ“¤ Kirim ke WA</button>
            <button id="btnGameClaim" class="btn-cute btn-gold" style="display: none;" onclick="window.arcadeGame.claimDirectly()">ğŸ’° AMBIL SEKARANG!</button>
            
            <p style="font-size: 0.9rem; margin-top: 15px; cursor: pointer; text-decoration: underline; color: white;" onclick="window.arcadeGame.resetGame()">Main Lagi</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script src="main.js?v=4"></script>

    <script src="effects.js?v=3"></script>
    <script src="fireworks.js?v=3"></script>

    <div id="signatureGlobal">A.M.</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, push, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";
        const firebaseConfig = {
            apiKey: "AIzaSyCWS47KfiuFKe-nISBKa8ctrwDt7jJbSTM",
            authDomain: "note-ad793.firebaseapp.com",
            databaseURL: "https://note-ad793-default-rtdb.asia-southeast1.firebasedatabase.app/",
            projectId: "note-ad793",
            storageBucket: "note-ad793.firebasestorage.app",
            messagingSenderId: "932514166408",
            appId: "1:932514166408:web:74170c0c034963503e7e89"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const openMsgBtn = document.getElementById('openMsgBtn');
        const msgModal = document.getElementById('msgModal');
        const closeMsgBtn = document.getElementById('cancelMsgBtn');
        const sendMsgBtn = document.getElementById('sendMsgBtn');
        const msgInput = document.getElementById('userMessageInput');
        const toast = document.getElementById('toast');

        if(openMsgBtn) {
            openMsgBtn.addEventListener('click', () => { msgModal.classList.add('show'); msgInput.focus(); });
            closeMsgBtn.addEventListener('click', () => { msgModal.classList.remove('show'); });
            msgModal.addEventListener('click', (e) => { if (e.target === msgModal) msgModal.classList.remove('show'); });

            sendMsgBtn.addEventListener('click', () => {
                const text = msgInput.value.trim();
                if (!text) { alert("Tulis pesannya dulu dong ğŸ¥º"); return; }
                const originalText = sendMsgBtn.innerText;
                sendMsgBtn.innerText = "Mengirim..."; sendMsgBtn.disabled = true;

                push(ref(db, 'birthday_messages'), {
                    message: text,
                    timestamp: serverTimestamp(),
                    date: new Date().toString()
                }).then(() => {
                    msgModal.classList.remove('show'); msgInput.value = ""; showToast();
                }).catch((error) => {
                    console.error(error); alert("Gagal kirim pesan. Coba lagi.");
                }).finally(() => {
                    sendMsgBtn.innerText = originalText; sendMsgBtn.disabled = false;
                });
            });
        }
        function showToast() {
            toast.className = "show"; setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
        }
    </script>
</body>
</html>
